"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[996],{60808:function(re,w,t){t.r(w),t.d(w,{default:function(){return x}});var j=t(13448),T=t.n(j),H=t(74815),G=t.n(H),J=t(28152),b=t.n(J),N=t(93236),s=t(30301),A=t(93034),K=t(95020),D=t(53330),M=t(23817),Q=t(51593),U=t(30189),X=t(67855),q=t.n(X),L=t(75427),g=t(67801),$=t(98984),_=t(56425),r=t(31756),e=t(62086),o=L.Z.Option,n=function(l){var h=l.onSubmit,E=l.onConnect,y=l.createClusterVisible,F=l.handleCreateClusterDrawer,v=g.Z.useForm(),S=b()(v,1),C=S[0],V=(0,N.useState)([]),P=b()(V,2),Z=P[0],R=P[1],f=(0,N.useState)(!1),i=b()(f,2),d=i[0],p=i[1],c=function(){var m=G()(T()().mark(function u(){return T()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:try{C.validateFields(["connectString","token","clusterType"]).then(function(z){E(z),p(!0),$.ZP.success("\u8FDE\u63A5\u6D4B\u8BD5\u6210\u529F")})}catch(z){$.ZP.error("\u8FDE\u63A5\u6D4B\u8BD5\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u8F93\u5165\u4FE1\u606F")}case 1:case"end":return B.stop()}},u)}));return function(){return m.apply(this,arguments)}}(),ee=function(){C.validateFields().then(function(u){h(u),C.resetFields(),p(!1)})},W=function(u){var k=Z.filter(function(B){return B!==u});R(k)},Y=function(){var u=C.getFieldValue("newTag");u&&!Z.includes(u)&&(R([].concat(q()(Z),[u])),C.setFieldsValue({newTag:""}))};return(0,e.jsx)(_.Z,{title:"\u65B0\u589E\u96C6\u7FA4",width:400,onClose:F,open:y,children:(0,e.jsxs)(g.Z,{form:C,layout:"vertical",children:[(0,e.jsx)(g.Z.Item,{name:"name",label:"\u96C6\u7FA4\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u96C6\u7FA4\u540D\u79F0"}],children:(0,e.jsx)(r.Z,{})}),(0,e.jsx)(g.Z.Item,{name:"connectString",label:"\u8FDE\u63A5\u5B57\u7B26\u4E32",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8FDE\u63A5\u5B57\u7B26\u4E32"}],children:(0,e.jsx)(r.Z,{})}),(0,e.jsx)(g.Z.Item,{name:"token",label:"\u4EE4\u724C",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4EE4\u724C"}],children:(0,e.jsx)(r.Z,{})}),(0,e.jsx)(g.Z.Item,{name:"clusterType",label:"\u96C6\u7FA4\u7C7B\u578B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u96C6\u7FA4\u7C7B\u578B"}],children:(0,e.jsxs)(L.Z,{placeholder:"\u8BF7\u9009\u62E9\u96C6\u7FA4\u7C7B\u578B",children:[(0,e.jsx)(o,{value:"k8s",children:"K8S"}),(0,e.jsx)(o,{value:"aliyun",children:"\u963F\u91CC\u4E91"}),(0,e.jsx)(o,{value:"tencent",children:"\u817E\u8BAF\u4E91"})]})}),(0,e.jsxs)(g.Z.Item,{label:"\u6807\u7B7E",children:[(0,e.jsx)(A.Z,{children:Z.map(function(m){return(0,e.jsx)(s.Z,{closable:!0,onClose:function(){return W(m)},children:m},m)})}),(0,e.jsx)(r.Z,{style:{width:"100px",marginLeft:"8px"},value:C.getFieldValue("newTag"),onChange:function(u){return C.setFieldsValue({newTag:u.target.value})},onPressEnter:Y}),(0,e.jsx)(D.Z,{type:"primary",onClick:Y,children:"\u6DFB\u52A0\u6807\u7B7E"})]}),(0,e.jsxs)(g.Z.Item,{children:[(0,e.jsx)(D.Z,{type:"primary",onClick:c,children:"\u6D4B\u8BD5\u8FDE\u63A5"}),(0,e.jsx)(D.Z,{type:"primary",onClick:ee,disabled:!d,children:"\u6DFB\u52A0\u96C6\u7FA4"})]})]})})},a=n,I=function(l){var h=l.dispatch,E=l.clusters,y=(0,N.useState)(!1),F=b()(y,2),v=F[0],S=F[1],C=function(){h({type:"cluster/listAll",payload:{}})};(0,N.useEffect)(function(){C()},[]);var V=[{title:"\u96C6\u7FA4\u540D\u79F0",dataIndex:"clusterName",key:"clusterName"},{title:"\u7248\u672C",dataIndex:"version",key:"version"},{title:"\u96C6\u7FA4\u7C7B\u578B",dataIndex:"clusterType",key:"clusterType"},{title:"\u72B6\u6001",dataIndex:"status",key:"status",render:function(i,d){var p=d.status==="0"?"success":"error",c=d.status==="0"?"\u6B63\u5E38":"\u505C\u7528";return(0,e.jsx)(s.Z,{color:p,children:c})}},{title:"\u6807\u7B7E",dataIndex:"tags",key:"tags",render:function(i){return(0,e.jsx)(A.Z,{children:i.map(function(d,p){return(0,e.jsx)(s.Z,{color:"blue",children:d},p)})})}},{title:"\u64CD\u4F5C",key:"actions",render:function(i,d){return(0,e.jsx)(A.Z,{size:"middle"})}}],P=function(){S(!v)},Z=function(i){h({type:"cluster/createCluster",payload:i}),P()},R=function(){var f=G()(T()().mark(function i(d){return T()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:console.log("\u8FDE\u63A5\u96C6\u7FA4:",d),h({type:"cluster/connectCluster",payload:d});case 2:case"end":return c.stop()}},i)}));return function(d){return f.apply(this,arguments)}}();return(0,e.jsx)(U._z,{title:"\u96C6\u7FA4\u7BA1\u7406",children:(0,e.jsx)(K.Z,{children:(0,e.jsxs)(A.Z,{size:"middle",direction:"vertical",style:{width:"100%"},children:[(0,e.jsx)(D.Z,{type:"primary",onClick:P,children:"\u65B0\u589E\u96C6\u7FA4"}),(0,e.jsx)(a,{onSubmit:Z,handleCreateClusterDrawer:P,createClusterVisible:v,onConnect:R}),(0,e.jsx)(M.Z,{columns:V,dataSource:E,rowKey:"clusterId",pagination:{pageSize:10}})]})})})},x=(0,Q.connect)(function(O){var l=O.cluster;return{clusters:l.clusterList}})(I)},30301:function(re,w,t){t.d(w,{Z:function(){return _}});var j=t(25201),T=t(97605),H=t(89043),G=t(75391),J=t(84875),b=t.n(J),N=t(87017),s=t(93236),A=t(38932),K=t(61065),D=t(94697),M=function(r,e){var o={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(o[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(o[n[a]]=r[n[a]]);return o},Q=function(e){var o=e.prefixCls,n=e.className,a=e.checked,I=e.onChange,x=e.onClick,O=M(e,["prefixCls","className","checked","onChange","onClick"]),l=s.useContext(A.E_),h=l.getPrefixCls,E=function(S){I==null||I(!a),x==null||x(S)},y=h("tag",o),F=b()(y,(0,j.Z)((0,j.Z)({},"".concat(y,"-checkable"),!0),"".concat(y,"-checkable-checked"),a),n);return s.createElement("span",(0,T.Z)({},O,{className:F,onClick:E}))},U=Q,X=function(r,e){var o={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(o[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(o[n[a]]=r[n[a]]);return o},q=new RegExp("^(".concat(K.Y.join("|"),")(-inverse)?$")),L=new RegExp("^(".concat(K.E.join("|"),")$")),g=function(e,o){var n=e.prefixCls,a=e.className,I=e.style,x=e.children,O=e.icon,l=e.color,h=e.onClose,E=e.closeIcon,y=e.closable,F=y===void 0?!1:y,v=X(e,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),S=s.useContext(A.E_),C=S.getPrefixCls,V=S.direction,P=s.useState(!0),Z=(0,H.Z)(P,2),R=Z[0],f=Z[1];s.useEffect(function(){"visible"in v&&f(v.visible)},[v.visible]);var i=function(){return l?q.test(l)||L.test(l):!1},d=(0,T.Z)({backgroundColor:l&&!i()?l:void 0},I),p=i(),c=C("tag",n),ee=b()(c,(0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)({},"".concat(c,"-").concat(l),p),"".concat(c,"-has-color"),l&&!p),"".concat(c,"-hidden"),!R),"".concat(c,"-rtl"),V==="rtl"),a),W=function(te){te.stopPropagation(),h==null||h(te),!te.defaultPrevented&&("visible"in v||f(!1))},Y=function(){return F?E?s.createElement("span",{className:"".concat(c,"-close-icon"),onClick:W},E):s.createElement(G.Z,{className:"".concat(c,"-close-icon"),onClick:W}):null},m="onClick"in v||x&&x.type==="a",u=(0,N.Z)(v,["visible"]),k=O||null,B=k?s.createElement(s.Fragment,null,k,s.createElement("span",null,x)):x,z=s.createElement("span",(0,T.Z)({},u,{ref:o,className:ee,style:d}),B,Y());return m?s.createElement(D.Z,null,z):z},$=s.forwardRef(g);$.CheckableTag=U;var _=$}}]);
