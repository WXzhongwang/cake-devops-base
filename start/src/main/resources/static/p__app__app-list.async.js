"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[551],{79046:function(ue,V,a){a.r(V),a.d(V,{default:function(){return c}});var b=a(77117),N=a.n(b),Q=a(28152),E=a.n(Q),g=a(93236),G=a(30189),y=a(75427),r=a(67801),J=a(30301),$=a(93034),U=a(95020),I=a(31756),k=a(53330),X=a(23817),z=a(51593),q=a(56425),e=a(62086),Z=y.Z.Option,M=function(t){var j=t.dispatch,d=t.open,m=t.userData,o=t.onClose,i=t.departments,x=r.Z.useForm(),F=E()(x,1),S=F[0],h=(0,g.useState)([]),C=E()(h,2),P=C[0],L=C[1],T=function(p){console.log("\u521B\u5EFA\u5E94\u7528:",p),p.owner=m.userId;var O=i.find(function(B){return B.value===p.department});O&&(p.departmentAbbr=O.abbr),j({type:"app/createApp",payload:p}),o()};return(0,g.useEffect)(function(){var f=i==null?void 0:i.map(function(p){return{value:p.value,label:p.label}});L(f)},[i]),(0,e.jsx)(q.Z,{title:"\u6DFB\u52A0\u5E94\u7528",width:400,onClose:o,open:d,destroyOnClose:!0,children:(0,e.jsxs)(r.Z,{form:S,onFinish:T,layout:"vertical",children:[(0,e.jsx)(r.Z.Item,{name:"appName",label:"\u5E94\u7528\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5E94\u7528\u540D\u79F0"}],children:(0,e.jsx)(I.Z,{placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u540D\u79F0"})}),(0,e.jsx)(r.Z.Item,{name:"department",label:"\u90E8\u95E8",children:(0,e.jsx)(y.Z,{placeholder:"\u8BF7\u9009\u62E9\u90E8\u95E8",allowClear:!0,children:P==null?void 0:P.map(function(f){return(0,e.jsx)(Z,{value:f.value,children:f.label},f.value)})})}),(0,e.jsx)(r.Z.Item,{name:"repo",label:"\u4ED3\u5E93\u5730\u5740",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4ED3\u5E93\u5730\u5740"}],children:(0,e.jsx)(I.Z,{placeholder:"\u8BF7\u8F93\u5165\u4ED3\u5E93\u5730\u5740"})}),(0,e.jsx)(r.Z.Item,{name:"defaultBranch",label:"\u9ED8\u8BA4\u5206\u652F",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u5206\u652F"}],children:(0,e.jsx)(I.Z,{placeholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u5206\u652F"})}),(0,e.jsx)(r.Z.Item,{name:"developMode",label:"\u5F00\u53D1\u6A21\u5F0F",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5F00\u53D1\u6A21\u5F0F"}],children:(0,e.jsxs)(y.Z,{placeholder:"\u8BF7\u9009\u62E9\u5F00\u53D1\u6A21\u5F0F",children:[(0,e.jsx)(Z,{value:"Freedom",children:"\u81EA\u7531\u6A21\u5F0F"}),(0,e.jsx)(Z,{value:"GitFlow",children:"\u6807\u51C6\u6A21\u5F0F"}),(0,e.jsx)(Z,{value:"Branch",children:"\u5206\u652F\u6A21\u5F0F"})]})}),(0,e.jsx)(r.Z.Item,{name:"language",label:"\u5F00\u53D1\u8BED\u8A00",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5F00\u53D1\u8BED\u8A00"}],children:(0,e.jsxs)(y.Z,{placeholder:"\u8BF7\u9009\u62E9\u5F00\u53D1\u8BED\u8A00",children:[(0,e.jsx)(Z,{value:"JAVA",children:"Java"}),(0,e.jsx)(Z,{value:"PYTHON",children:"Python"}),(0,e.jsx)(Z,{value:"GO",children:"GO"})]})}),(0,e.jsx)(r.Z.Item,{name:"healthCheck",label:"\u5065\u5EB7\u68C0\u67E5\u5730\u5740",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5065\u5EB7\u68C0\u67E5\u5730\u5740"}],children:(0,e.jsx)(I.Z,{placeholder:"\u8BF7\u8F93\u5165\u5065\u5EB7\u68C0\u67E5\u5730\u5740"})}),(0,e.jsx)(r.Z.Item,{children:(0,e.jsx)(k.Z,{type:"primary",htmlType:"submit",children:"\u63D0\u4EA4"})})]})})},_=(0,z.connect)(function(n){var t=n.user;return{userData:t.userData}})(M),u=y.Z.Option,l=function(t){var j=t.dispatch,d=t.appList,m=t.departments,o=(0,g.useState)({pageNo:1,pageSize:10}),i=E()(o,2),x=i[0],F=i[1],S=(0,g.useState)([]),h=E()(S,2),C=h[0],P=h[1],L=(0,g.useState)({appName:"",department:"",language:""}),T=E()(L,2),f=T[0],p=T[1],O=(0,g.useState)(!1),B=E()(O,2),ee=B[0],R=B[1],D=function(){R(!0)},te=function(){R(!1)},Y=r.Z.useForm(),ae=E()(Y,1),H=ae[0];(0,g.useEffect)(function(){ne(),K()},[x,f]);var ne=function(){j({type:"app/getAppList",payload:N()(N()({},x),f)})},K=function(){j({type:"app/getDepartments"})},re=[{title:"\u5E94\u7528\u540D\u79F0",dataIndex:"appName",key:"appName",render:function(v,A){return(0,e.jsx)("a",{onClick:function(){return w(A)},children:A.appName})}},{title:"\u4ED3\u5E93",dataIndex:"repo",key:"repo",width:200},{title:"\u9ED8\u8BA4\u5206\u652F",dataIndex:"defaultBranch",key:"defaultBranch"},{title:"\u90E8\u95E8",dataIndex:"department",key:"department"},{title:"\u5F00\u53D1\u8BED\u8A00",dataIndex:"language",key:"language"},{title:"\u63CF\u8FF0",dataIndex:"description",key:"description"},{title:"\u5F00\u53D1\u6A21\u5F0F",dataIndex:"developMode",key:"developMode"},{title:"\u72B6\u6001",dataIndex:"status",key:"status",render:function(v,A){var le=A.status==="0"?"success":"error",se=A.status==="0"?"\u6B63\u5E38":"\u505C\u7528";return(0,e.jsx)(J.Z,{color:le,children:se})}},{title:"\u64CD\u4F5C",key:"action",render:function(v,A){return(0,e.jsx)($.Z,{size:"middle",children:(0,e.jsx)("a",{onClick:function(){return w(A)},children:"\u67E5\u770B"})})}}];console.log("departments",m),(0,g.useEffect)(function(){var s=m==null?void 0:m.map(function(v){return{value:v.value,label:v.label}});P(s)},[m]);var W=function(v,A){F({pageNo:v,pageSize:A||10})},w=function(v){console.log("\u67E5\u770B\u5E94\u7528\u8BE6\u60C5",v),z.history.push("/app/info/".concat(v.appId))};return(0,e.jsx)(G._z,{title:"\u5E94\u7528\u4E2D\u5FC3",children:(0,e.jsx)(U.Z,{children:(0,e.jsxs)($.Z,{size:"middle",direction:"vertical",style:{width:"100%"},children:[(0,e.jsxs)(r.Z,{form:H,layout:"inline",onFinish:function(v){console.log(v),p(v)},children:[(0,e.jsx)(r.Z.Item,{name:"appName",label:"\u5E94\u7528\u540D\u79F0",children:(0,e.jsx)(I.Z,{placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u540D\u79F0"})}),(0,e.jsx)(r.Z.Item,{name:"department",label:"\u90E8\u95E8",children:(0,e.jsx)(y.Z,{placeholder:"\u8BF7\u9009\u62E9\u90E8\u95E8",allowClear:!0,children:C==null?void 0:C.map(function(s){return(0,e.jsx)(u,{value:s.value,children:s.label},s.value)})})}),(0,e.jsx)(r.Z.Item,{name:"language",label:"\u5F00\u53D1\u8BED\u8A00",children:(0,e.jsxs)(y.Z,{placeholder:"\u8BF7\u9009\u62E9\u5F00\u53D1\u8BED\u8A00",children:[(0,e.jsx)(u,{value:"java",children:"Java"}),(0,e.jsx)(u,{value:"python",children:"Python"})]})}),(0,e.jsxs)(r.Z.Item,{children:[(0,e.jsx)(k.Z,{type:"primary",htmlType:"submit",children:"\u67E5\u8BE2"}),(0,e.jsx)(k.Z,{onClick:function(){H.resetFields(),p({appName:"",department:"",language:""})},children:"\u91CD\u7F6E"})]})]}),(0,e.jsx)(k.Z,{type:"primary",onClick:D,children:"\u521B\u5EFA\u5E94\u7528"}),(0,e.jsx)(_,{open:ee,onClose:te,departments:m}),(0,e.jsx)(X.Z,{columns:re,dataSource:d.list,rowKey:"appId",pagination:{total:d.total,current:x.pageNo,pageSize:x.pageSize,onChange:W}})]})})})},c=(0,z.connect)(function(n){var t=n.app;return{appList:t.appList,departments:t.departments}})(l)},30301:function(ue,V,a){a.d(V,{Z:function(){return _}});var b=a(25201),N=a(97605),Q=a(89043),E=a(75391),g=a(84875),G=a.n(g),y=a(87017),r=a(93236),J=a(38932),$=a(61065),U=a(94697),I=function(u,l){var c={};for(var n in u)Object.prototype.hasOwnProperty.call(u,n)&&l.indexOf(n)<0&&(c[n]=u[n]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,n=Object.getOwnPropertySymbols(u);t<n.length;t++)l.indexOf(n[t])<0&&Object.prototype.propertyIsEnumerable.call(u,n[t])&&(c[n[t]]=u[n[t]]);return c},k=function(l){var c=l.prefixCls,n=l.className,t=l.checked,j=l.onChange,d=l.onClick,m=I(l,["prefixCls","className","checked","onChange","onClick"]),o=r.useContext(J.E_),i=o.getPrefixCls,x=function(C){j==null||j(!t),d==null||d(C)},F=i("tag",c),S=G()(F,(0,b.Z)((0,b.Z)({},"".concat(F,"-checkable"),!0),"".concat(F,"-checkable-checked"),t),n);return r.createElement("span",(0,N.Z)({},m,{className:S,onClick:x}))},X=k,z=function(u,l){var c={};for(var n in u)Object.prototype.hasOwnProperty.call(u,n)&&l.indexOf(n)<0&&(c[n]=u[n]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,n=Object.getOwnPropertySymbols(u);t<n.length;t++)l.indexOf(n[t])<0&&Object.prototype.propertyIsEnumerable.call(u,n[t])&&(c[n[t]]=u[n[t]]);return c},q=new RegExp("^(".concat($.Y.join("|"),")(-inverse)?$")),e=new RegExp("^(".concat($.E.join("|"),")$")),Z=function(l,c){var n=l.prefixCls,t=l.className,j=l.style,d=l.children,m=l.icon,o=l.color,i=l.onClose,x=l.closeIcon,F=l.closable,S=F===void 0?!1:F,h=z(l,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),C=r.useContext(J.E_),P=C.getPrefixCls,L=C.direction,T=r.useState(!0),f=(0,Q.Z)(T,2),p=f[0],O=f[1];r.useEffect(function(){"visible"in h&&O(h.visible)},[h.visible]);var B=function(){return o?q.test(o)||e.test(o):!1},ee=(0,N.Z)({backgroundColor:o&&!B()?o:void 0},j),R=B(),D=P("tag",n),te=G()(D,(0,b.Z)((0,b.Z)((0,b.Z)((0,b.Z)({},"".concat(D,"-").concat(o),R),"".concat(D,"-has-color"),o&&!R),"".concat(D,"-hidden"),!p),"".concat(D,"-rtl"),L==="rtl"),t),Y=function(s){s.stopPropagation(),i==null||i(s),!s.defaultPrevented&&("visible"in h||O(!1))},ae=function(){return S?x?r.createElement("span",{className:"".concat(D,"-close-icon"),onClick:Y},x):r.createElement(E.Z,{className:"".concat(D,"-close-icon"),onClick:Y}):null},H="onClick"in h||d&&d.type==="a",ne=(0,y.Z)(h,["visible"]),K=m||null,re=K?r.createElement(r.Fragment,null,K,r.createElement("span",null,d)):d,W=r.createElement("span",(0,N.Z)({},ne,{ref:c,className:te,style:ee}),re,ae());return H?r.createElement(U.Z,null,W):W},M=r.forwardRef(Z);M.CheckableTag=X;var _=M}}]);
