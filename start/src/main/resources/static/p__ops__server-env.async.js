"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[909],{79628:function(xe,K,t){t.r(K),t.d(K,{default:function(){return ct}});var k=t(77117),H=t.n(k),Ve=t(28152),M=t.n(Ve),e=t(93236),De=t(75427),Te=t(36222),Ce=t(53970),He=t(93034),N=t(67801),w=t(31756),B=t(53330),Le=t(23817),Ae=t(56425),Ke=t(51593),Se=t(36014),V=t(97605),b=t(25201),Ee=t(89043),Re=t(26407),$e=t(84875),re=t.n($e),oe=t(38932),ke=t(92252),Be=t(87708),Ye=t(63116),Ue=t(31117),We=t(50322),Ze=t(46547),Ge=t(10275),Je=t(85671),Ie=function(n,r){var a={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&r.indexOf(i)<0&&(a[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)r.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(a[i[s]]=n[i[s]]);return a},Qe=function(r){var a=r.prefixCls,i=r.className,s=r.avatar,g=r.title,f=r.description,Z=Ie(r,["prefixCls","className","avatar","title","description"]),p=(0,e.useContext)(oe.E_),y=p.getPrefixCls,c=y("list",a),C=re()("".concat(c,"-item-meta"),i),l=e.createElement("div",{className:"".concat(c,"-item-meta-content")},g&&e.createElement("h4",{className:"".concat(c,"-item-meta-title")},g),f&&e.createElement("div",{className:"".concat(c,"-item-meta-description")},f));return e.createElement("div",(0,V.Z)({},Z,{className:C}),s&&e.createElement("div",{className:"".concat(c,"-item-meta-avatar")},s),(g||f)&&l)},Xe=function(r,a){var i=r.prefixCls,s=r.children,g=r.actions,f=r.extra,Z=r.className,p=r.colStyle,y=Ie(r,["prefixCls","children","actions","extra","className","colStyle"]),c=(0,e.useContext)(ie),C=c.grid,l=c.itemLayout,P=(0,e.useContext)(oe.E_),u=P.getPrefixCls,Y=function(){var I;return e.Children.forEach(s,function(W){typeof W=="string"&&(I=!0)}),I&&e.Children.count(s)>1},L=function(){return l==="vertical"?!!f:!Y()},E=u("list",i),R=g&&g.length>0&&e.createElement("ul",{className:"".concat(E,"-item-action"),key:"actions"},g.map(function(O,I){return e.createElement("li",{key:"".concat(E,"-item-action-").concat(I)},O,I!==g.length-1&&e.createElement("em",{className:"".concat(E,"-item-action-split")}))})),U=C?"div":"li",F=e.createElement(U,(0,V.Z)({},y,C?{}:{ref:a},{className:re()("".concat(E,"-item"),(0,b.Z)({},"".concat(E,"-item-no-flex"),!L()),Z)}),l==="vertical"&&f?[e.createElement("div",{className:"".concat(E,"-item-main"),key:"content"},s,R),e.createElement("div",{className:"".concat(E,"-item-extra"),key:"extra"},f)]:[s,R,(0,Je.Tm)(f,{key:"extra"})]);return C?e.createElement(Ge.Z,{ref:a,flex:1,style:p},F):F},je=(0,e.forwardRef)(Xe);je.Meta=Qe;var we=je,qe=function(n,r){var a={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&r.indexOf(i)<0&&(a[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)r.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(a[i[s]]=n[i[s]]);return a},ie=e.createContext({}),ft=ie.Consumer;function Pe(n){var r=n.pagination,a=r===void 0?!1:r,i=n.prefixCls,s=n.bordered,g=s===void 0?!1:s,f=n.split,Z=f===void 0?!0:f,p=n.className,y=n.children,c=n.itemLayout,C=n.loadMore,l=n.grid,P=n.dataSource,u=P===void 0?[]:P,Y=n.size,L=n.header,E=n.footer,R=n.loading,U=R===void 0?!1:R,F=n.rowKey,O=n.renderItem,I=n.locale,W=qe(n,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),G=a&&(0,Re.Z)(a)==="object"?a:{},le=e.useState(G.defaultCurrent||1),D=(0,Ee.Z)(le,2),ce=D[0],q=D[1],J=e.useState(G.defaultPageSize||10),Q=(0,Ee.Z)(J,2),T=Q[0],de=Q[1],X=e.useContext(oe.E_),ue=X.getPrefixCls,ve=X.renderEmpty,_=X.direction,me={current:1,total:0},ee=function(S){return function(A,z){q(A),de(z),a&&a[S]&&a[S](A,z)}},fe=ee("onChange"),he=ee("onShowSizeChange"),x=function(S,A){if(!O)return null;var z;return typeof F=="function"?z=F(S):F?z=S[F]:z=S.key,z||(z="list-item-".concat(A)),e.createElement(e.Fragment,{key:z},O(S,A))},d=function(){return!!(C||a||E)},m=function(S,A){return e.createElement("div",{className:"".concat(S,"-empty-text")},I&&I.emptyText||A("List"))},h=ue("list",i),$=U;typeof $=="boolean"&&($={spinning:$});var ge=$&&$.spinning,te="";switch(Y){case"large":te="lg";break;case"small":te="sm";break;default:break}var dt=re()(h,(0,b.Z)((0,b.Z)((0,b.Z)((0,b.Z)((0,b.Z)((0,b.Z)((0,b.Z)((0,b.Z)({},"".concat(h,"-vertical"),c==="vertical"),"".concat(h,"-").concat(te),te),"".concat(h,"-split"),Z),"".concat(h,"-bordered"),g),"".concat(h,"-loading"),ge),"".concat(h,"-grid"),!!l),"".concat(h,"-something-after-last-item"),d()),"".concat(h,"-rtl"),_==="rtl"),p),j=(0,V.Z)((0,V.Z)((0,V.Z)({},me),{total:u.length,current:ce,pageSize:T}),a||{}),be=Math.ceil(j.total/j.pageSize);j.current>be&&(j.current=be);var Oe=a?e.createElement("div",{className:"".concat(h,"-pagination")},e.createElement(Ue.Z,(0,V.Z)({},j,{onChange:fe,onShowSizeChange:he}))):null,pe=(0,Se.Z)(u);a&&u.length>(j.current-1)*j.pageSize&&(pe=(0,Se.Z)(u).splice((j.current-1)*j.pageSize,j.pageSize));var ut=Object.keys(l||{}).some(function(v){return["xs","sm","md","lg","xl","xxl"].includes(v)}),ze=(0,Ye.Z)(ut),ne=e.useMemo(function(){for(var v=0;v<Ze.c4.length;v+=1){var S=Ze.c4[v];if(ze[S])return S}},[ze]),vt=e.useMemo(function(){if(l){var v=ne&&l[ne]?l[ne]:l.column;if(v)return{width:"".concat(100/v,"%"),maxWidth:"".concat(100/v,"%")}}},[l==null?void 0:l.column,ne]),ye=ge&&e.createElement("div",{style:{minHeight:53}});if(pe.length>0){var Me=pe.map(function(v,S){return x(v,S)});ye=l?e.createElement(Be.Z,{gutter:l.gutter},e.Children.map(Me,function(v){return e.createElement("div",{key:v==null?void 0:v.key,style:vt},v)})):e.createElement("ul",{className:"".concat(h,"-items")},Me)}else!y&&!ge&&(ye=m(h,ve||ke.Z));var ae=j.position||"bottom",mt=e.useMemo(function(){return{grid:l,itemLayout:c}},[JSON.stringify(l),c]);return e.createElement(ie.Provider,{value:mt},e.createElement("div",(0,V.Z)({className:dt},W),(ae==="top"||ae==="both")&&Oe,L&&e.createElement("div",{className:"".concat(h,"-header")},L),e.createElement(We.Z,(0,V.Z)({},$),ye,y),E&&e.createElement("div",{className:"".concat(h,"-footer")},E),C||(ae==="bottom"||ae==="both")&&Oe))}Pe.Item=we;var se=Pe,o=t(62086),_e=function(r){var a=r.hosts,i=r.onItemClick,s=a.length>0?a[0].hostId:null,g=(0,e.useState)(s),f=M()(g,2),Z=f[0],p=f[1];return(0,o.jsx)(se,{header:(0,o.jsx)("div",{children:"\u673A\u5668\u5217\u8868"}),dataSource:a,renderItem:function(c){return(0,o.jsx)(se.Item,{onClick:function(){p(c.hostId),i(c.hostId)},style:{backgroundColor:c.hostId===Z?"#f0f0f0":"transparent"},children:(0,o.jsx)(se.Item.Meta,{title:c.name,description:"IP:"+c.serverAddr})})},pagination:{position:"bottom",pageSize:10}})},et=_e,tt=t(13448),Fe=t.n(tt),nt=t(74815),at=t.n(nt),rt=w.Z.TextArea,ot=function(r){var a=r.initialValues,i=r.onSave,s=r.onCancel,g=r.onUpdate,f=N.Z.useForm(),Z=M()(f,1),p=Z[0];e.useEffect(function(){p.setFieldsValue(a)},[p,a]);var y=function(){var c=at()(Fe()().mark(function C(){var l;return Fe()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,p.validateFields();case 3:l=u.sent,a?g(l):i(l),u.next=10;break;case 7:u.prev=7,u.t0=u.catch(0),console.error("\u8868\u5355\u9A8C\u8BC1\u5931\u8D25:",u.t0);case 10:case"end":return u.stop()}},C,null,[[0,7]])}));return function(){return c.apply(this,arguments)}}();return(0,o.jsxs)(N.Z,{form:p,layout:"vertical",onFinish:y,children:[(0,o.jsx)(N.Z.Item,{name:"attrKey",label:"Key",rules:[{required:!0,message:"\u8BF7\u8F93\u5165Key"}],children:(0,o.jsx)(w.Z,{placeholder:"\u8BF7\u8F93\u5165Key"})}),(0,o.jsx)(N.Z.Item,{name:"attrValue",label:"Value",rules:[{required:!0,message:"\u8BF7\u8F93\u5165Value"}],children:(0,o.jsx)(w.Z,{placeholder:"\u8BF7\u8F93\u5165Value"})}),(0,o.jsx)(N.Z.Item,{name:"description",label:"\u63CF\u8FF0",rules:[{required:!1,max:30,message:"\u8BF7\u8F93\u5165\u4E0D\u8D85\u8FC730\u4E2A\u5B57\u7B26\u7684\u63CF\u8FF0"}],children:(0,o.jsx)(rt,{placeholder:"\u8BF7\u8F93\u5165\u63CF\u8FF0",rows:4})}),(0,o.jsxs)(N.Z.Item,{children:[(0,o.jsxs)(B.Z,{type:"primary",htmlType:"submit",children:[a?"\u66F4\u65B0":"\u4FDD\u5B58"," "]}),(0,o.jsx)(B.Z,{onClick:s,style:{marginLeft:8},children:"\u53D6\u6D88"})]})]})},it=ot,st=t(5726),Ne=t.n(st),ht=De.Z.Option,lt=function(r){var a=r.dispatch,i=r.hosts,s=r.hostsTotal,g=r.hostEnvs,f=r.hostEnvsTotal,Z=(0,e.useState)(""),p=M()(Z,2),y=p[0],c=p[1],C=(0,e.useState)({pageNo:1,pageSize:10}),l=M()(C,2),P=l[0],u=l[1],Y=(0,e.useState)({pageNo:1,pageSize:10}),L=M()(Y,2),E=L[0],R=L[1],U=(0,e.useState)({name:""}),F=M()(U,2),O=F[0],I=F[1],W=(0,e.useState)(!1),G=M()(W,2),le=G[0],D=G[1],ce=(0,e.useState)(void 0),q=M()(ce,2),J=q[0],Q=q[1];(0,e.useEffect)(function(){a({type:"host/fetchHosts",payload:{pageNo:1,pageSize:10}})},[a,E]);var T=function(d){a({type:"hostEnv/fetchVariables",payload:H()(H()(H()({},P),O),{},{hostId:d})})};(0,e.useEffect)(function(){T(y)},[O,P]),(0,e.useEffect)(function(){i.length>0&&(c(i[0].hostId),T(i[0].hostId))},[i]);var de=function(d){c(d),T(d)},X=function(d,m){u({pageNo:d,pageSize:m||10})},ue=function(){Q(void 0),D(!0)},ve=function(d){Q(d),D(!0)},_=function(){D(!1)},me=function(d){a({type:"hostEnv/deleteVariable",payload:{envId:d},callback:function(){T(y)}})},ee=function(d){var m=H()(H()({},d),{},{hostId:y});a({type:"hostEnv/addVariable",payload:m,callback:function(){T(y)}}),D(!1)},fe=function(d){var m=H()(H()({},d),{},{id:J.id});a({type:"hostEnv/updateVariable",payload:m,callback:function(){T(y)}}),D(!1)},he=[{title:"Key",dataIndex:"attrKey",key:"attrKey"},{title:"Value",dataIndex:"attrValue",key:"attrValue"},{title:"\u63CF\u8FF0",dataIndex:"description",key:"description"},{title:"\u521B\u5EFA\u65F6\u95F4",key:"gmtCreate",render:function(d,m){return(0,o.jsx)(o.Fragment,{children:Ne()(m==null?void 0:m.gmtCreate).format("YYYY-MM-DD HH:mm:ss")})}},{title:"\u4FEE\u6539\u65F6\u95F4",key:"gmtModified",render:function(d,m){return(0,o.jsx)(o.Fragment,{children:Ne()(m==null?void 0:m.gmtModified).format("YYYY-MM-DD HH:mm:ss")})}},{title:"\u64CD\u4F5C",key:"action",render:function(d,m){return(0,o.jsxs)("span",{children:[(0,o.jsx)("a",{onClick:function(){return ve(m)},children:"\u7F16\u8F91"}),(0,o.jsx)("span",{style:{margin:"0 8px"},children:"|"}),(0,o.jsx)("a",{onClick:function(){return me(m.id)},children:"\u5220\u9664"})]})}}];return(0,o.jsxs)(Te.Z,{gutter:16,children:[(0,o.jsx)(Ce.Z,{span:6,children:(0,o.jsx)(et,{hosts:i,onItemClick:de})}),(0,o.jsxs)(Ce.Z,{span:18,children:[(0,o.jsxs)(He.Z,{size:"middle",direction:"vertical",style:{width:"100%"},children:[(0,o.jsxs)(N.Z,{layout:"inline",onFinish:function(d){I(d)},children:[(0,o.jsx)(N.Z.Item,{name:"name",label:"\u53D8\u91CF\u540D\u79F0",children:(0,o.jsx)(w.Z,{placeholder:"\u53D8\u91CF\u540D\u79F0"})}),(0,o.jsxs)(N.Z.Item,{children:[(0,o.jsx)(B.Z,{type:"primary",htmlType:"submit",style:{marginRight:8},children:"\u67E5\u8BE2"}),(0,o.jsx)(B.Z,{onClick:function(){I({name:""})},children:"\u91CD\u7F6E"})]})]}),(0,o.jsx)(B.Z,{type:"primary",onClick:ue,children:"\u65B0\u589E\u73AF\u5883\u53D8\u91CF"}),(0,o.jsx)(Le.Z,{columns:he,dataSource:g,rowKey:"id",pagination:{total:f,current:P.pageNo,pageSize:P.pageSize,onChange:X}})]}),(0,o.jsx)(Ae.Z,{title:J?"\u7F16\u8F91\u73AF\u5883\u53D8\u91CF":"\u65B0\u589E\u73AF\u5883\u53D8\u91CF",width:360,open:le,onClose:_,destroyOnClose:!0,children:(0,o.jsx)(it,{initialValues:J,onSave:ee,onCancel:_,onUpdate:fe})})]})]})},ct=(0,Ke.connect)(function(n){var r=n.host,a=n.hostEnv;return{hosts:r.hosts,hostsTotal:r.total,hostEnvs:a.hostEnvs,hostEnvsTotal:a.hostEnvsTotal}})(lt)},53970:function(xe,K,t){var k=t(10275);K.Z=k.Z},36222:function(xe,K,t){var k=t(87708);K.Z=k.Z}}]);
